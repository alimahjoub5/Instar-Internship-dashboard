<div class="product-list-container">
  <div class="product-list-filters-row">
    <div class="product-list-filters">
      <div class="search-input-wrapper">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" class="search-icon">
          <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" stroke-width="2"/>
        </svg>
        <input type="text" placeholder="Search products by name..." [(ngModel)]="searchTerm" (input)="onSearchChange()" />
      </div>
      <div class="select-wrapper">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="select-icon">
          <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2"/>
        </svg>
        <select [(ngModel)]="selectedCategory" (change)="onCategoryChange()">
          <option value="">All Categories</option>
          <option *ngFor="let cat of categories" [value]="cat._id">{{ cat.title }}</option>
        </select>
      </div>
      <div class="select-wrapper">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="select-icon">
          <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2"/>
        </svg>
        <select [(ngModel)]="selectedSupplier" (change)="onSupplierChange()">
          <option value="">All Suppliers</option>
          <option *ngFor="let sup of suppliers" [value]="sup._id">{{ sup.name }}</option>
        </select>
      </div>
    </div>
    <button (click)="addProduct()" class="btn btn-primary" title="Add New Product">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
        <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2"/>
      </svg>
      <span>Add Product</span>
    </button>
  </div>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" stroke="currentColor" stroke-width="2"/>
            </svg>
            Product Name
          </th>
          <th>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M12 1v22M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6" stroke="currentColor" stroke-width="2"/>
            </svg>
            Price
          </th>
          <th>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M3 3h18v18H3zM8 12h8" stroke="currentColor" stroke-width="2"/>
            </svg>
            Category
          </th>
          <th>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" stroke="currentColor" stroke-width="2"/>
              <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
              <path d="M23 21v-2a4 4 0 00-3-3.87" stroke="currentColor" stroke-width="2"/>
              <path d="M16 3.13a4 4 0 010 7.75" stroke="currentColor" stroke-width="2"/>
            </svg>
            Supplier
          </th>
          <th>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" stroke="currentColor" stroke-width="2"/>
            </svg>
            Quantity
          </th>
          <th>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M12 20h9M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z" stroke="currentColor" stroke-width="2"/>
            </svg>
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of filteredProducts" class="product-row">
          <td class="product-name">
            <div class="product-info">
              <span class="product-title">{{ product.name }}</span>
              <span class="product-id">#{{ getProductId(product._id) }}</span>
            </div>
          </td>
          <td class="product-price">
            <span class="price-amount">{{ product.price | currency:'USD':'symbol':'1.2-2' }}</span>
          </td>
          <td class="product-category">
            <span class="category-badge">{{ getCategoryName(product.category) }}</span>
          </td>
          <td class="product-supplier">
            <span class="supplier-name">{{ getSupplierName(product.supplier) }}</span>
          </td>
          <td class="product-quantity">
            <span class="quantity-badge" [class.in-stock]="getQuantity(product.quantity3D) > 0" [class.out-of-stock]="getQuantity(product.quantity3D) === 0">
              {{ getQuantity(product.quantity3D) }}
            </span>
          </td>
          <td class="product-actions">
            <button (click)="viewProduct(product._id || '')" title="View Product Details" class="action-btn view-btn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z" stroke="currentColor" stroke-width="2"/>
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button (click)="editProduct(product._id || '')" title="Edit Product" class="action-btn edit-btn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke="currentColor" stroke-width="2"/>
                <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button (click)="deleteProduct(product._id || '')" title="Delete Product" class="action-btn delete-btn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button (click)="goToReviews(product._id || '')" title="View Reviews" class="action-btn reviews-btn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="isLoading" class="loading">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" class="loading-spinner">
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-dasharray="31.416" stroke-dashoffset="31.416">
        <animate attributeName="stroke-dasharray" dur="2s" values="0 31.416;15.708 15.708;0 31.416" repeatCount="indefinite"/>
        <animate attributeName="stroke-dashoffset" dur="2s" values="0;-15.708;-31.416" repeatCount="indefinite"/>
      </circle>
    </svg>
    <span>Loading products...</span>
  </div>
  
  <div *ngIf="error" class="error">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
      <path d="M15 9l-6 6M9 9l6 6" stroke="currentColor" stroke-width="2"/>
    </svg>
    <span>{{ error }}</span>
  </div>

  <div *ngIf="!isLoading && filteredProducts.length === 0" class="empty-state">
    <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
      <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" stroke="currentColor" stroke-width="2"/>
    </svg>
    <h3>No products found</h3>
    <p>Try adjusting your search criteria or add a new product to get started.</p>
    <button (click)="addProduct()" class="btn btn-primary">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
        <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2"/>
      </svg>
      <span>Add Your First Product</span>
    </button>
  </div>
</div>
