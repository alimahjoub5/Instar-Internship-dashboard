<div class="product-list-container">
  <div class="product-list-filters-row">
    <div class="product-list-filters">
      <input type="text" placeholder="Search by name..." [(ngModel)]="searchTerm" (input)="onSearchChange()" />
      <select [(ngModel)]="selectedCategory" (change)="onCategoryChange()">
        <option value="">All Categories</option>
        <option *ngFor="let cat of categories" [value]="cat._id">{{ cat.title }}</option>
      </select>
      <select [(ngModel)]="selectedSupplier" (change)="onSupplierChange()">
        <option value="">All Suppliers</option>
        <option *ngFor="let sup of suppliers" [value]="sup._id">{{ sup.name }}</option>
      </select>
    </div>
    <button (click)="addProduct()" class="btn btn-primary" title="Add Product">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="#fff" stroke-width="2"/></svg>
    </button>
  </div>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Price</th>
        <th>Category</th>
        <th>Supplier</th>
        <th>Quantity</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of filteredProducts">
        <td>{{ product.name }}</td>
        <td>{{ product.price }}</td>
        <td>{{ getCategoryName(product.category) }}</td>
        <td>{{ getSupplierName(product.supplier) }}</td>
        <td>{{ product.quantity3D ?? '-' }}</td>
        <td>
          <button (click)="viewProduct(product._id)" title="View">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z" stroke="#333" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke="#333" stroke-width="2"/></svg>
          </button>
          <button (click)="editProduct(product._id)" title="Edit">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 21h4l11-11a2.828 2.828 0 0 0-4-4L4 17v4z" stroke="#333" stroke-width="2"/><path d="M14.5 6.5l3 3" stroke="#333" stroke-width="2"/></svg>
          </button>
          <button (click)="deleteProduct(product._id)" title="Delete">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="6" width="18" height="15" rx="2" stroke="#333" stroke-width="2"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" stroke="#333" stroke-width="2"/><path d="M10 11v6M14 11v6" stroke="#333" stroke-width="2"/></svg>
          </button>
          <button (click)="goToReviews(product._id)" title="Reviews">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" stroke="#333" stroke-width="2"/></svg>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="isLoading">Loading products...</div>
  <div *ngIf="error" class="error">{{ error }}</div>
</div>
